<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RK SPORTS STREAMING WEB</title>
<style>
  body {
    background: #000;
    color: #0ff;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  h1 {
    margin-top: 15px;
    font-weight: 700;
    text-shadow: 0 0 8px #00ffc3;
  }
  #playerBox {
    width: 100%;
    max-width: 900px;
    height: 480px;
    margin: 20px auto;
    border-radius: 12px;
    border: 2px solid #00ffc3;
    box-shadow: 0 0 15px #00ffc3;
    background: #111;
    overflow: hidden;
  }
  iframe, video {
    width: 100%;
    height: 100%;
    border-radius: 12px;
    background: black;
  }
  #controls {
    max-width: 900px;
    width: 100%;
    margin: 10px auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    padding: 0 10px;
  }
  #volumeControl {
    flex-grow: 1;
    max-width: 200px;
  }
  button {
    background: #00ffc3;
    border: none;
    color: #000;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #00b38a;
    color: #fff;
  }
  #channelList {
    max-width: 900px;
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 10px;
  }
  .channelBtn {
    background: #005f4d;
    border: 2px solid #00ffc3;
    border-radius: 8px;
    color: #0ff;
    font-weight: 600;
    padding: 8px 16px;
    cursor: pointer;
    flex: 1 1 140px;
    text-align: center;
    user-select: none;
    transition: background 0.3s ease, color 0.3s ease;
  }
  .channelBtn:hover, .channelBtn.active {
    background: #00ffc3;
    color: #000;
  }
  @media (max-width: 600px) {
    #playerBox {
      height: 260px;
    }
  }
</style>
</head>
<body>

<h1>M3U8 & Iframe Auto Player</h1>

<div id="playerBox">
  <!-- Video or iframe player will be loaded here -->
</div>

<div id="controls">
  <label for="volumeControl">Volume</label>
  <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.7" />
  <button id="recordBtn">Start Recording</button>
</div>

<div id="channelList">
  <!-- Channel buttons auto generated here -->
</div>

<script>
  // Channels array: each subarray = different servers for 1 channel
  // Put URLs as you want, iframe/html URLs or .m3u8 direct streams
  const channels = [
  ["https://amitb3669.github.io/allinonereborn/str_sports_hindi.html", "https://watch.dtvxtream.com/lunar-ipl-hindi", "https://momixtvmpdplayer.pages.dev/?play=https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/clients/dash/enc/qoumyhlpal/out/v1/3cd34e92a4e64d239c73eaad0637b094/cenc.mpd&kid=2306a99f3da0dd901a5e5ab547c1a7d1&key=6c1c0c2b7d29b6ab1bfaa62e0fc30728"],
  ["https://allinonereborn.com/spicetv-web/player.html?url=https%3A%2F%2Fallinonereborn.com%2Ftest.m3u8%3Fid%3D65088&name=WILLOW%20HD", "https://amssandbrix.b-cdn.net/LiveApp/streams/NKAv2V2BTnEuVJdS170390248731.m3u8"],
  ["https://allinonereborn.com/spicetv-web/player.html?url=https%3A%2F%2Fallinonereborn.com%2Ftest.m3u8%3Fid%3D44598&name=MLB%20NETWORK%20HD", "https://watch.dtvxtream.com/lunar-ipl-eng"]
];
let currentChannel = 0;
let isRecording = false;
let startTime = null;

function toggleServers() {
  const list = document.getElementById("serverList");
  list.style.display = list.style.display === "block" ? "none" : "block";
}

function toggleQualities() {
  const list = document.getElementById("qualityList");
  list.style.display = list.style.display === "block" ? "none" : "block";
}

function loadChannel(index) {
  currentChannel = index;
  showServers(index);
  loadStream(channels[index][0]);
}

function showServers(index) {
  const list = document.getElementById("serverList");
  list.innerHTML = "";
  channels[index].forEach((url, i) => {
    const div = document.createElement("div");
    div.innerText = url === "no-url" ? "NO OTHER SERVER" : `Server ${i + 1}`;
    div.onclick = () => url !== "no-url" && loadStream(url);
    list.appendChild(div);
  });
}

function loadStream(url) {
  const playerBox = document.getElementById("playerBox");
  if (url.includes("iframe") || url.includes(".html") || url.includes("player?") || url.includes("multimovies")) {
    // iframe player
    playerBox.innerHTML = `<iframe src="${url}" frameborder="0" allowfullscreen style="width:100%; height:480px; border-radius:12px; border: 2px solid #00ffc3; box-shadow: 0 0 15px #00ffc3;"></iframe>`;
  } else {
    // video player for .m3u8 or direct streams
    playerBox.innerHTML = `<video controls autoplay id="mainPlayer" style="width:100%; height:480px; border-radius:12px; border: 2px solid #00ffc3; box-shadow: 0 0 15px #00ffc3;">
      <source src="${url}" type="application/x-mpegURL">
      Your browser does not support the video tag.
    </video>`;

    // Attach volume listener once
    const volumeControl = document.getElementById("volumeControl");
    const video = document.getElementById("mainPlayer");
    if (volumeControl && video) {
      volumeControl.oninput = function () {
        video.volume = this.value;
      };
      video.volume = volumeControl.value; // initial volume sync
    }
  }
}

function toggleRecording(btn) {
  if (!isRecording) {
    isRecording = true;
    startTime = new Date();
    btn.innerText = "Stop Recording";
  } else {
    const duration = (new Date() - startTime) / 1000;
    const blob = new Blob([`Fake recorded content of ${duration.toFixed(0)}s`], { type: "video/mp4" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `recording_${Date.now()}.mp4`;
    a.click();
    isRecording = false;
    btn.innerText = "Start Recording";
  }
}

function enterPiP() {
  const video = document.getElementById("mainPlayer");
  if (video && document.pictureInPictureEnabled && !video.disablePictureInPicture) {
    video.requestPictureInPicture().catch(console.error);
  }
}

document.addEventListener("keydown", function(e) {
  const video = document.getElementById("mainPlayer");
  if (!video) return;
  if (e.code === "Space") video.paused ? video.play() : video.pause();
  if (e.code === "ArrowRight") video.currentTime += 10;
  if (e.code === "ArrowLeft") video.currentTime -= 10;
});

// Initial load
loadChannel(0);
